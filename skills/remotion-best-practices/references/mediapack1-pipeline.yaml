# mediapack1.pipeline.manifest.yaml
version: 0.3
name: "mediapack1 creative leverage pipeline"
goal: "Turn installed tools into compounding creative output: consistent style + infinite reuse + fast variant minting."

workspace:
  root: "~/MediaPack"
  dirs:
    - assets/
    - assets/_incoming/
    - assets/_cache/
    - manifests/
    - templates/
    - projects/
    - renders/
    - reports/

modules:

  - id: asset_ledger
    title: "Asset Ledger"
    leverage: "Every asset becomes reusable capital; no more folder-chaos."
    artifacts:
      - "manifests/assets.ledger.yaml"
      - "assets/by_hash/<sha256>/*"
      - "reports/assets.verify.md"
    schema:
      asset_record:
        id: "slug or uuid"
        sha256: "content hash"
        kind: "broll|sfx|music|font|lut|icon|overlay|model|hdr|texture|caption"
        source: {url: "", author: "", license: "", attribution: "", notes: ""}
        tags: ["mood:dark", "tempo:fast", "brand:safe", "use:endcard"]
        tech: {duration_s: 0, fps: 0, w: 0, h: 0, codec: "", alpha: false}
        status: "approved|needs_review|banned"
    commands:
      add: "mediapack1 pack add <path> --kind <kind> --tags ... --license ... --source <url>"
      verify: "mediapack1 pack verify"
      search: "mediapack1 pack search <query>"
    acceptance:
      - "pack verify returns 0"
      - "every asset has license + status"
      - "no duplicate sha256 records"

  - id: style_dna_pack
    title: "Style DNA Pack (Look + Motion + Sound tokens)"
    leverage: "You stop designing from scratch. You 'sample your own taste' deterministically."
    concept: >
      A compact token system for visual + motion + audio identity.
      Your agent can generate cohesive visuals without debating fonts/colors every time.
    artifacts:
      - "manifests/style.dna.yaml"
      - "templates/style/ (css, motion presets, caption presets)"
      - "reports/style.preview.md (optional)"
    schema:
      style_dna:
        fonts:
          primary: {name: "Inter", weights: [400,600,800]}
          display: {name: "Space Grotesk", weights: [400,600,700]}
          mono: {name: "JetBrains Mono", weights: [400,600]}
        color:
          bg: ["#0A0A0A", "#101010"]
          fg: ["#FAFAFA", "#D8D8D8"]
          accent: ["#7C3AED", "#22C55E", "#06B6D4"]
          danger: ["#EF4444"]
        layout_tokens:
          safe_margin_px: 72
          corner_radius_px: [18, 28]
          shadow: ["soft", "medium"]
          grid: {cols: 12, gutter_px: 24}
        motion_tokens:
          easing: ["expoOut", "quadOut", "backOut"]
          durations_ms: {micro: 120, short: 220, medium: 360, long: 600}
          transitions:
            allowed: ["fade", "push", "mask_wipe", "scale_in"]
            max_per_minute: 6
          typography:
            title_anim: "rise+blur"
            lowerthird_anim: "slide+settle"
        audio_tokens:
          loudness_target_lufs: -14
          sfx_density: "low|medium"
          music_bpm_bands: [80, 95, 120]
          stingers:
            intro: "asset_id"
            outro: "asset_id"
        caption_tokens:
          style: "karaoke|word_pop|clean_subs"
          max_chars_per_line: 32
          highlight_color: "#22C55E"
          box: {enabled: true, padding_px: 18, blur_bg: 14}
    commands:
      init: "mediapack1 style init"
      apply: "mediapack1 style apply --project <name> --dna manifests/style.dna.yaml"
      lint: "mediapack1 style lint --dna manifests/style.dna.yaml"
    acceptance:
      - "style lint passes (fonts exist, colors valid, motion presets defined)"
      - "at least 1 caption style + 1 title style + 1 endcard style defined"
      - "agent can render 3 different videos that still look like the same 'brand'"

  - id: template_forge
    title: "Template Forge (Blueprint → Project → Variants)"
    leverage: "You mint videos like software builds: one blueprint produces infinite outputs."
    concept: >
      A minimal "video blueprint" file compiles into a project scaffold (Remotion or ffmpeg script),
      then produces platform variants (9:16 / 1:1 / 16:9, captions-on/off, CTA swaps).
    artifacts:
      - "manifests/blueprints/*.yaml"
      - "templates/compositions/ (Remotion or timeline snippets)"
      - "projects/<name>/"
      - "renders/<name>/<variant>/"
      - "reports/render.<name>.md"
    schema:
      blueprint:
        meta: {id: "slug", title: "", fps: 30, duration_s: 30, aspect: "9:16"}
        inputs:
          data: "path/to/data.json"
          voiceover: {optional: true, asset_id: ""}
          music: {optional: true, asset_id: ""}
          captions: {optional: true, srt: "path/to.srt"}
          visuals:
            - {slot: "hero", kind: "image|video|model", asset_id: ""}
            - {slot: "broll", kind: "video", asset_id: ""}
        structure:
          - {t: 0.0,  type: "title_card",  duration: 2.0}
          - {t: 2.0,  type: "explainer",   duration: 18.0}
          - {t: 20.0, type: "demo",        duration: 7.0}
          - {t: 27.0, type: "endcard_cta", duration: 3.0}
        style:
          dna_ref: "manifests/style.dna.yaml"
          caption_style: "clean_subs"
        variants:
          - {name: "shorts_9x16", aspect: "9:16", captions: true,  cta: "follow"}
          - {name: "square_1x1",  aspect: "1:1",  captions: true,  cta: "link"}
          - {name: "yt_16x9",     aspect: "16:9", captions: false, cta: "subscribe"}
    commands:
      compile: "mediapack1 forge compile manifests/blueprints/<id>.yaml"
      render: "mediapack1 forge render <project> --all-variants"
      batch: "mediapack1 forge batch <folder_of_blueprints>"
    acceptance:
      - "compile is idempotent (running twice yields same scaffold)"
      - "renders produce 3 variants with correct aspect + safe margins"
      - "captions never exceed max_chars_per_line; endcard always visible"

notes:
  what_this_enables:
    - "Consistent aesthetic (Style DNA) + reusable assets (Ledger) + mass output (Forge)."
    - "Agents stop improvising structure; they execute a spec."
  design_principles:
    - "Style DNA should be small enough to memorize and strict enough to enforce."
    - "Template Forge should be boringly deterministic - batch-generate without babysitting."
